<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch Blog</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
  <h2 class="text-center mb-4">Danh s√°ch Blog</h2>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="d-flex align-items-center">
      <label class="me-2 fw-bold">L·ªçc theo danh m·ª•c:</label>
      <select class="form-select" style="width: 250px"
              onchange="location.href='/blogs/category/' + this.value">
        <option value="">-- T·∫•t c·∫£ danh m·ª•c --</option>
        <option th:each="cat : ${categories}"
                th:value="${cat.id}"
                th:text="${cat.name}"
                th:selected="${selectedCategory != null and cat.id == selectedCategory.id}">
        </option>
      </select>
    </div>

    <div>
      <a href="/blogs/create" class="btn btn-primary me-2">+ Vi·∫øt Blog</a>
      <a href="/categories/create" class="btn btn-outline-success">+ Th√™m Category</a>
      <a href="/categories" class="btn btn-outline-secondary">
        üìÇ Danh s√°ch Category
      </a>
    </div>
  </div>

  <table class="table table-bordered table-striped">
    <thead>
    <tr>
      <th>Ti√™u ƒë·ªÅ</th>
      <th>T√°c gi·∫£</th>
      <th>Danh m·ª•c</th>
      <th>Ng√†y t·∫°o</th>
      <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="blog : ${blogs.content}">
      <td th:text="${blog.title}"></td>
      <td th:text="${blog.author != null ? blog.author : 'Kh√¥ng r√µ'}"></td>
      <td th:text="${blog.category != null ? blog.category.name : 'Ch∆∞a c√≥'}"></td>
      <td th:text="${#temporals.format(blog.createdAt, 'dd/MM/yyyy HH:mm')}"></td>
      <td>
        <a th:href="@{/blogs/{id}(id=${blog.id})}" class="btn btn-sm btn-info text-white">Xem</a>
        <a th:href="@{/blogs/edit/{id}(id=${blog.id})}" class="btn btn-sm btn-warning">S·ª≠a</a>
        <a th:href="@{/blogs/delete/{id}(id=${blog.id})}" class="btn btn-sm btn-danger"
           onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a blog n√†y?')">X√≥a</a>
      </td>
    </tr>
    </tbody>
  </table>
  <div class="d-flex justify-content-center mt-3">
    <nav>
      <ul class="pagination">
        <li th:classappend="${!blogs.hasPrevious()} ? 'disabled'">
          <a th:href="@{/blogs(page=${blogs.number - 1})}" class="page-link">Trang tr∆∞·ªõc</a>
        </li>

        <li th:each="i : ${#numbers.sequence(0, blogs.totalPages - 1)}"
            th:classappend="${i == blogs.number} ? 'active'">
          <a th:href="@{/blogs(page=${i})}" class="page-link" th:text="${i + 1}"></a>
        </li>

        <li th:classappend="${!blogs.hasNext()} ? 'disabled'">
          <a th:href="@{/blogs(page=${blogs.number + 1})}" class="page-link">Trang sau</a>
        </li>
      </ul>
    </nav>
  </div>

</div>
</body>
</html>
